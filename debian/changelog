pt-device-manager (4.1.5) buster; urgency=medium

  [ Ben P ]
  * Add empty daemon
  * Add classes
  * Move service into debian.
  * Initial commit
  * Add a bit more logic

  [ Mike Roberts ]
  * Removed extra systemd service
  * Removed .pyc files; added to gitignore

  [ Ben P ]
  * Re-arrange files and move to modules rather than classes for the time-being
  * Remove renamed file
  * Use Python3, other small changes for prototype
  * Partially working sample
  * Add test client
  * Change port number
  * Add dependency for pyzmq
  * Add further logic to IPC servers. Add thread to request server. Update test client

  [ Mike Roberts ]
  * Migrated pt-hub-controller to python3-pt-hub/pthub.py. Still needs testing, but increment/decrement brightness works

  [ Ben P ]
  * Change info messages to debug. Add signal handling and keep-alive loop in controller. Implement test get_brightness msg
  * Update install file list
  * Add Python dependency
  * Add Python dependency
  * Move files to /usr/lib/pt-device-manager
  * Remove unused module
  * Attempt to remove lintian warnings
  * Attempt to remove lintian warnings
  * Send logging output to the journal
  * Add some messaging functions to the publish server
  * Add logic for processing requests
  * Add testings
  * Improve message handling
  * Use controller object as callback. Catch zmq exceptions. Refactor
  * Remove renamed file
  * Convert to classes for consistency
  * Route messages in controller. Tidy up
  * Add logic to detect hubs and initialise them. Tidy exception handling.
  * Rename method
  * Fix logging levels
  * Fix syntax error
  * Add message file to install

  [ Mike Roberts ]
  * Now PEP8 compliant (with 2 exceptions). Removed python3-pt-hub folder, as this has its own repository now
  * Added all relevant publish messages for hub

  [ Ben P ]
  * Changed message definitions

  [ Mike Roberts ]
  * Updated to use PUB_SCREEN_BLANKED message

  [ Ben P ]
  * Fix issues importing modules
  * Fix syntax error
  * Wire up start and stop for hub manager. Use device id instead of hub info
  * Style
  * Fix syntax error
  * This package replaces pt-battery and pt-hub-controller

  [ Mike Roberts ]
  * Pass logger into hub's initialise()
  * Added method name to logger when in debug mode
  * Added missing self to print message in logger
  * No longer printing everything regardless of log level
  * And again - sorry
  * Don't always print debugs

  [ Ben P ]
  * Register client for callback. Improve logging and message handling
  * Add sleeps between tests
  * Add methods for incrementing and decrementing brightness; and screen blanking/unblanking
  * Return rather than raise error on connecting servers

  [ Mike Roberts ]
  * Added lid message functionality
  * Removed redundant set logging function

  [ Ben P ]
  * Add DISPLAY env variable to systemd service

  [ Mike Roberts ]
  * Added shutdown client to capture low battery events. Waiting on pi-topHUB repo to send repeated events when capacity is not changing
  * Improved readability
  * Tidied up initialising counters
  * Added pt-brightness, pt-device-manager-resp-test for testing that all emits are working as expected, and did a first pass at porting pt-peripherals-daemon to pt-peripheral-manager
  * Fixed reference to sed_inplace
  * Executable resp test
  * Moved tests outside of debug folder so that imports will be picked up
  * PeripheralManager consts are now not self.
  * Removed test.py
  * Added common and shutdown client to install file
  * PublishServer consts are now not self.
  * ShutdownManager consts are now not self.
  * Added self to RequestServer's __init__
  * Added threading import to peripheral manager
  * Fixed self references in peripheral mgr and function calls in initialise
  * Fixed more self references in peripheral mgr
  * Fixed typo
  * Hopefully fixed all selfs
  * Fixed reference to self AGAIN
  * Fixe subprocess call and is_initialised() call
  * Added sleep import to peripheral manager; fixed reference to process_battery_state()
  * Moved thread declaration to init of RequestServer
  * Fixed parsing of check_output in peripheral manager - now decoding into UTF-8, which was previously happening via '-*- coding: utf-8 -*-'.
  * Fixed self reference in shutdown client
  * Actually half-stable!
  * Publish test script now working, added desktop message service ready to be tested as part of peripherals
  * Added logic for low battery shutdown warnings
  * Attempting to fix issues with package - added systemd service for desktop message service
  * Fixed spaces in rules file
  * Stabbing in the dark: Volume 1
  * Some stuff
  * Fixed desktop message service systemd file
  * Fixed os imports in peripheral manager
  * Desktop messaging service now exits cleanly
  * Updated device ID on req test to handle both devices

  [ Ben P ]
  * Fix issues with lid messages. Add Poweroff systemd service
  * Add dh override so that the poweroff executable binary doesn't cause problems in packaging.
  * Add dh override so that the poweroff executable binary doesn't cause problems in packaging.
  * Add dh override so that the poweroff executable binary doesn't cause problems in packaging.
  * Add dh override so that the poweroff executable binary doesn't cause problems in packaging.
  * Add dh override so that the poweroff executable binary doesn't cause problems in packaging.
  * Don't start the shutdown script on install
  * Add dependency, update description of service
  * Fix test
  * Fix code flow. Don't pass publish server into other classes

  [ Mike Roberts ]
  * Migrated files to ptdm_client

  [ Ben P ]
  * Removed references to peripheral state files/breadcrumbs, as now this information is sent via published messages.
  * Added missing selfs

  [ Mike Roberts ]
  * Removed pt-desktop-message-service
  * Removed message service from install file
  * Removed migrated files from install file
  * Stripped poweroff
  * Added shlibs to dependencies for poweroff
  * Removed override_dh_shlibdeps, see what happens
  * Test
  * Test
  * Test
  * Testing install - hopefully will not hang any longer
  * Fixed typo
  * Migrated I2S files from pt-peripheral-cfg
  * Removed 'dh_installinit --noscripts --name=pt-poweroff' from rules file to try and get pt-poweroff to enable automatically
  * Removed 'override_dh_installinit' from rules
  * Added 'dh_installinit --noscripts' in 'override_dh_installinit' in rules file
  * Removed 'override_dh_systemd_start'
  * Let's try override_dh_systemd_enable
  * pt-device-message -> pt-device-manager

  [ Ben P ]
  * Emit and get battery messages to/from the dashboard
  * Wire up peripheral-based messages from device manager
  * Update v2 hub name
  * Add further support for v2 hub. Remove false positive v1 hub detection. Remove event/message params where possible
  * Allow pt-brightness to turn on backlight
  * Device manager replaces pt-peripheral-cfg

  [ Mike Roberts ]
  * Added Idle Monitor

  [ Ben P ]
  * Start/stop idle monitor
  * Add logging

  [ Mike Roberts ]
  * Added pt-xhost-fix.service

  [ Ben P ]
  * Change the poll frequency for idletime monitor to increase responsivity for unblanking the screen
  * Add traceback logs on errors. Add logging around errors from pt-idletime
  * Check types being sent over the wire to catch bugs as early as possible
  * Merge battery messages into a single message
  * Get battery state now returns all battery params
  * Add reboot service

  [ Mike Roberts ]
  * Added pt-battery helper script

  [ Ben P ]
  * Improve shutdown logic so as not to close while reading/writing on a socket

  [ Mike Roberts ]
  * Added idle monitor to package

  [ Ben P ]
  * Some fixes around shutdown logic. No longer spam publish messages to info log
  * Respond to screen blanking timeout messages, and save timeout to config file

  [ Mike Roberts ]
  * Update pt-xhost-fix.service
  * Update pt-xhost-fix.service
  * Added Breaks to control file
  * Added disabling of xscreensaver, if appropriate, to postinst

  [ Ben P ]
  * Add first iteration of shutdown logic
  * Unblank the screen when shutting down
  * Fix typo
  * Ensure DISPLAY environment var is set
  * Disable screen blanking if timeout set to zero
  * Just unblank screen on shutdown
  * Fix postinst script

  [ Mike Roberts ]
  * Overhauled pt-brightness to accommodate screen blanking and unblanking
  * Updated pt-brightness, moved unblanking on stop

  [ Ben P ]
  * Add poweroff-v2 to power off the v2 hub after the OS shuts down
  * Add timeouts to pt-brightness and pt-battery
  * Tidy up
  * Fix filename
  * Rename ptdm_client to ptcommon, update packages, references correspondingly. Remove some python enums to simplify code
  * Move i2cdevice into common python lib
  * Test removing other services
  * Test removing overrides
  * Restore
  * Move install init in between enable and start systemd calls (https://wiki.debian.org/Teams/pkg-systemd/Packaging)
  * Make syntax consistent
  * Test: Simplify systemd starting

  [ Mike Roberts ]
  * New attempt at rules file
  * Fixed tabs in rules file
  * Try again
  * Fixed tabs in rules file
  * Trying compatability level 11
  * Updated build depends version of debhelper
  * Compat level 10
  * With added rules
  * ..
  * Fixed tabs in rules file
  * Can it be?
  * Fixed UART configuration issue by adding missing import line

  [ Ben P ]
  * Don't propagate messages from the journal log
  * Add support for v2 speaker detection
  * Use command line args for the logging parameters
  * Attempt to detect a v2 hub FIRST, then fallback on v1 as we cannot positively detect a CEED

  [ Mike Roberts ]
  * Now using ptcommon for logger
  * Fixed bug which would not allow for --help menu

  [ Ben P ]
  * Add logic to handle changing device ids. The peripheral and shutdown managers are not started until the hub manager has informed what device we're running on. No longer publish device id changed messages. If the device id changes from two known devices (e.g. SD Card swap) then reboot.
  * Promote logic reading device id from the v1 hub code into the device manager's hub manager. Add more logging. Improve error handling for servers
  * When the device id changes, write the new value to the device id file

  [ Matt Simons ]
  * Update pt-xhost-fix.service

  [ Ben P ]
  * Move to Mode 1 shutdown (hub powers down when it detects the pi has shutdown
  * When shutting down, stop the polling thread, to prevent continual detection-shutdown loop
  * Persist systemd logs
  * Add logic to set HDMI audio multiplexer in v2 hub

  [ Mike Roberts ]
  * Work in progress
  * Now working with v1 speaker on v1 hub
  * Now passing logger to speaker module in initialise()
  * Added v2_hub_hdmi_to_i2s_required return from initialise(), scaffolded code to process the response for v2 hubs
  * Initialise and enable now separated

  [ Ben P ]
  * Move configuration logic from the peripheral manager into the Pulse library; returning flags indicating what is required from the peripheral manager
  * Rename method names to be clearer

  [ Mike Roberts ]
  * Updated peripheral manager to accommodate initialise and enable_device functions in speaker code
  * Updated references to get counter class from ptcommon

  [ Ben P ]
  * Enable the v2 speaker on v2 hub

  [ Mike Roberts ]
  * Moved poweroffs to pt-device-manager directory, renamed v2 poweroff and updated systemd service
  * Executable poweroff-v2
  * Made v1 poweroff executable
  * No longer passing in None logger from poweroff-v2

  [ Ben P ]
  * Move to static PTLogger

  [ Mike Roberts ]
  * Migrated to two power off systemd services

  [ Ben P ]
  * Adjust logging
  * Switched logic so we give the device a chance to identify itself. This permits hot swapping an sdcard from v1 to v2 without reboot
  * Fix low battery warning message, add logging on publish (except battery)
  * Ensure that we don't call shutdown twice, as the second call hangs
  * If the battery capacity is 0%, i.e. the battery has been removed altogther, we should not shutdown or show warnings

  [ Mike Roberts ]
  * Added logic for detecting coming from reboot to determine device ID
  * Revert "Added logic for detecting coming from reboot to determine device ID"

  [ Matt Simons ]
  * Ensure reboot message is shown on first boot if pt-desktop installed

  [ Mike Roberts ]
  * Updated import method

  [ Ben P ]
  * Use flexible brightness scales: 16 point for pi-top v2 and 10 point for v1
  * Remove complex device id logic related to tracking and determining the type of hub. Now we simply assume that if we connect to a v1 hub and a battery we are on a pi-top, and if we connect to a v1 hub but can't connect to a battery, we're on a ceed. This allows us to remove much of the logic around saving the device id after reboot and rebooting if the device id changes.

  [ Mike Roberts ]
  * Fix xhost systemd service for first boots
  * Unblank screen on brightness changes

  [ Ben ]
  * Update changelog
  * Update control
  * Update copyright

  [ Ben P ]
  * Set audio to 3.5mm if not yet set
  * Set audio to 3.5mm if not yet set

  [ Mike Roberts ]
  * Delete pt-capture-reboot.service
  * Added unsupported hardware message
  * Unblank on messages and key events

  [ Ben ]
  * Update changelog
  * Update control

  [ Mike Roberts ]
  * Added detailed report from import errors
  * Moved package file contents to submodule
  * Moved most systemd services to submodule
  * Fixed submodule
  * Using new file structure in install file. Symlinked service files
  * Fixed links to pt-device-manager subdirectory in install file

  [ Ben P ]
  * Update changelog

  [ Mike Roberts ]
  * Updated submodule
  * Updated changelog for v1.0.4
  * Fixed changelog for v1.0.4
  * Added pt-input to Recommends

  [ Ben P ]
  * Start the systemd service AFTER pt-update-installer so that any updates to the service are realised when the service starts

  [ Mike Roberts ]
  * Updated submodule
  * Added pt-devices to install file

  [ Ben P ]
  * Fixed (or ignored where applicable) Lintian errors

  [ Mike Roberts ]
  * Updated submodule - testing new default values on feature branch
  * Updated submodule

  [ Matt Simons ]
  * Add missing python dependencies

  [ Mike Roberts ]
  * Update pt-xhost-fix.service
  * Updated submodule for I2C enabling; added raspi-config to control file
  * Updated submodule
  * Updated submodule
  * Updated submodule
  * Updated submodule
  * Updated hub v1 package name
  * Update control
  * Update control
  * Updated Jenkinsfile to push to non-free component
  * Bulk operating - updated copyright dates, added separation to lines in control files and added Stretch entry to all changelogs
  * Update control
  * Removed versions from dependencies
  * Updated submodule
  * Updated submodule
  * Updated submodule
  * Delete preinst
  * Updated submodule
  * Updated submodule

  [ Ben P ]
  * Updated submodule reference to latest fix
  * Updated package description

  [ Mike Roberts ]
  * Updated submodule
  * Updated submodule
  * Updated submodule
  * Updated changelog
  * Updated submodule
  * Updated package install list
  * Updated submodule
  * Updated submodule
  * Updated submodule
  * Updated submodule
  * Migrated pt-xhost-fix systemd service to lightdm config setting
  * Fixed install file
  * Fixed rules file
  * Fix symlink to systemd service
  * Fixed postinst
  * Fixed postinst - make xhost fix script executable
  * Now call xprintidle to get user idle time
  * Updated submodule
  * Updated submodule
  * Update postinst
  * Update postinst
  * Update postinst
  * Updated submodule
  * Updated changelog ready for release
  * Symlinked postinst, updated submodule
  * Updated submodule
  * Manual handling of enabling/disabling systemd service
  * Bump version in changelog
  * Updated dependencies

  [ ItsChoudhry ]
  * Updated submodule - more shutdown logging

  [ Ben P ]
  * Update changelog

  [ Mike Roberts ]
  * Updated submodule
  * Prevent repeat instantiation of devices
  * Fix common issues
  * Update changelog for v1.0.7-2
  * Point submodule to private repo
  * Add private Device Management repo; point to it
  * Update submodule
  * Updated submodule

  [ Choudhry Amjad ]
  * Add Bluetooth keyboard, OLED control and buttons functionality; update poweroff

  [ m-roberts ]
  * Update submodule
  * Update submodule
  * Update submodule
  * Add legacy systemd service
  * Update submodule
  * Update submodule
  * Update submodule
  * Add hub v3 dependency

  [ ItsChoudhry ]
  * :sparkles: Update submodule
  * :see_no_evil: Updating .gitignore

  [ Mike Roberts ]
  * âœ¨ Hub v3 enable/disable sys menu systemd service
  * Update submodule
  * Publish to Sirius repo
  * ðŸ”¥ Comment out Bluetooth code, remove bluetool dep
  * â™»ï¸ Implement BTManager using Python3 DBus Bluez API

  [ Ben P ]
  * Move bluetooth signal monitor to a new thread
  * Stop the thread cleanly if bluetooth is unavailable
  * Increase the delay between attempts to start bluetooth
  * Add more logging

  [ Mike Roberts ]
  * Update submodule (#50)
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Move pt-device-manager service to private repo
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Handle OLED systemd service in maintainer scripts; fix syntax
  * Update submodule ;Add .DS_ Store to gitignore
  * Recommend oled library
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule

  [ Tom Jennings ]
  * Manage systemd services from rules file

  [ Mike Roberts ]
  * Rename postinst to pt-device-manager.postinst
  * Update submodule

  [ Ben P ]
  * Once we are connected to the hub, read serial numbers from MCU and write to a file, to be collected by the registration service
  * Update submodule

  [ Mike Roberts ]
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Improve rules file
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update rules file based on raspberrypi-sys-mods
  * Skip override_dh_installinit
  * Add shlibs dependencies to control file
  * Add substvars to resolve shlibs dependency
  * Try substvars directly in rules file
  * Remove substvars file and remove override_dh_shlibdeps - handled directly in rules file
  * Update submodule
  * Re-add override_dh_shlibdeps (with comments), try suppress override_dh_strip
  * Re-add override_dh_strip, add comments
  * Move xhost workaround to pt-display dependency
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule
  * Update directory reference from poweroff to shutdown
  * Update submodule
  * Update submodule
  * Remove python3-pt-proto-plus dependency
  * Remove unnecessarily specified shlibs
  * Add python3-pygame dependency for startup audio
  * Bump changelog to v2.0.0
  * Force disconnect before trying to connect after pairing
  * Add support for publishing display state changes; bump to v2.1.0
  * Update submodule
  * Dummy
  * Revert "Dummy"
  * Many improvements; bump to v2.2.0
  * Update submodule

  [ Ben P ]
  * Move the keyboard autoconnect logic into the BTKBManager class, and into its own thread which can be signalled when necessary
  * Update changelog
  * Update submodule: Fix bug pairing keyboards which have a hexadecimal letter in their MAC address. The MAC address read from the hub register is in lower-case, but bluez returns MAC addresses in upper-case
  * Update changelog
  * Update submodule: Only run the bt keyboard manager if we're on a pi-top[4]
  * Fix path to tests
  * Update submodule: fix tests
  * Update submodule: fix tests
  * Update submodule: Fix issues with pt-devices. Add pt-host to provide an easy way to discover the host device
  * Improve error handling around the oled start-up animation

  [ ItsChoudhry ]
  * Update changelog

  [ Ben P ]
  * Use nose to run unit tests
  * Use nose to run unit tests

  [ Mike Roberts ]
  * Add pre-commit config; run pre-commit

  [ Ben P ]
  * Update submodule
  * Update submodule
  * Use jenkins method for unit testing

  [ Mike Roberts ]
  * Add pre-commit check
  * Urgency=medium, distro=Buster
  * Fix changelog package name
  * Fix changelog package name
  * Fix pre-commit dir error
  * Attempt to fix Jenkinsfile
  * Attempt to fix Jenkinsfile
  * Apply linting

  [ Ben P ]
  * Attempt to prevent poweroff being started on upgrade
  * Attempt to prevent poweroff being started on upgrade
  * Attempt to prevent poweroff being started on upgrade
  * Change pt-desktop dependency to pt-notifications

  [ Mike Roberts ]
  * Update submodule
  * Update submodule

  [ ItsChoudhry ]
  * Update submodule

  [ Ben P ]
  * Allow device manager to exit cleanly on non-pi-top hardware
  * Give CEEDs a little longer to connect
  * Fix bug: Sometimes the device Id is passed as an int
  * Fix I2S audio switching
  * Precommit fixes

  [ Mike Roberts ]
  * Update submodule
  * Update submodule
  * Update submodule
  * Update submodule

  [ Choudhry Amjad ]
  * Refactor shutdown service to handle different host devices better

  [ ItsChoudhry ]
  * Fix changelog

  [ Mike Roberts ]
  * Remove pt-notifications-service requirement in systemd service
  * Remove DISPLAY env from systemd service
  * Bump changelog
  * Update device ID names to match branding
  * Update pt-devices response
  * 'pi-top[4]' --> 'pi-top [4]'
  * Fix pt-host output
  * Temporarily disable tests to get a build out
  * Fix pt-host output
  * Improve device ID writing function
  * Bump changelog
  * pt-poweroff: strip device host ID string
  * Bump changelog
  * Bump changelog
  * Bump changelog
  * Remove unused battery functions from hub manager

  [ Ben P ]
  * Update changelog
  * Rename pt-display package to pt-os-mods
  * Fix line endings
  * Update submodule and re-enable unit tests
  * Add ability to explicitly add a setting to config.txt, rather than set the value of settings with the same name. This is important for adding NEW dtparam= lines, rather than editing existing ones, to add multiple device tree options

  [ Choudhry Amjad ]
  * Add reboot service

  [ Mike Roberts ]
  * Add reboot service into rules file
  * Bump changelog
  * Fix changelog formatting
  * Continue fixing changelog format
  * Continue fixing changelog format
  * Reduce 'battery warning message' noise in log output
  * Reduce output noise from RPi's polling lxpanel plugin

  [ ItsChoudhry ]
  * Add latest commits to changelog

  [ Mike Roberts ]
  * Set default screen blanking timeout to 5 mins

  [ ItsChoudhry ]
  * Update changelog

  [ Ben P ]
  * Only modify /boot/config.txt if the host hardware has changed, otherwise preserve any user changes

  [ Mike Roberts ]
  * Post OS build errors to Slack #os-builds
  * Try new Jenkinsfile (#83)
  * No longer override stripping
  * Updated Jenkinsfile
  * Compat level 11
  * Use kwargs for setting up logging
  * Fix Lintian errors
  * Remove unused Bluetooth keyboard functions
  * Shutdown mode 4 if /tmp/pt-poweroff.reboot exists
  * Bump changelog
  * Add dpkg triggers
  * Remove startup sound
  * Remove startup sound dependency
  * Add postinst for dpkg trigger

  [ Jorge Capona ]
  * Bump changelog
  * Remove audio configuration change on start

  [ Mike Roberts ]
  * Set Hifiberry driver as new audio output when necessary
  * Set Hifiberry explicitly in ALSA
  * Add dependency descriptions
  * Loop startup animation when expanding filesystem
  * Robust host device management
  * Use command runner to call pt-host

  [ Jorge Capona ]
  * Remove extra character from pt-oled-startup-anim

  [ Mike Roberts ]
  * Remove apparently unnecessary baudrate reduction for pi-top 1
  * Fix tests
  * Bump changelog
  * Architecture: all
  * Add Lintian override for testing
  * Move pt-os-mods to recommends
  * oops
  * oops..
  * Make wiringpi optional until we rewrite legacy poweroff script in Python
  * Update submodule
  * Update submodule
  * Update submodule
  * Add missing timeout

  [ Jorge Capona ]
  * Bump changelog

  [ Mike Roberts ]
  * Add breadcrumb patch for upgrading
  * Move breadcrumb fix to preinst

  [ Jorge Capona ]
  * Don't create expandedFs breadcrumb on chroot
  * Bump changelog

  [ Mike Roberts ]
  * Bump changelog
  * Bump compat level; use dh_installsystemd
  * Replace poweroff-legacy with Python implementation
  * Use debhelper-compat (= 12)
  * Try and use dh-sequence-python3 build dependency
  * Suppress new Lintian warnings
  * Add 1.0 debian format
  * Use multi-user.target; upgrade package
  * Remove unused line; fix changelog date
  * Remove unused Lintian override
  * Remove obsolete pyversions file
  * Refactor dependencies (#86)
  * Remove config editing functionality
  * Remove line
  * Remove config editing functionality 2
  * Bump submodule
  * Update submodule
  * Update submodule
  * Define replacing pt-os-mods
  * Update Lintian overrides

  [ Jorge Capona ]
  * Bump changelog
  * Update pre-commit yaml

  [ Mike Roberts ]
  * Suggests python3-pitop
  * Remove submodules
  * Disable tests
  * Attempt to fix copyright file issue
  * Attempt to fix copyright file issue 2
  * Remove config from Jenkinsfile
  * Add hub modules to install file
  * Update hub dependencies
  * ptcommon -> pitop.core
  * Migrate peripheral libs
  * Remove submodules (#88)
  * Shutdown manager -> power manager
  * Simplify install file
  * Add support for charging sounds (#89)

  [ Jorge Capona ]
  * Update dependency pitop.core -> pitop.utils
  * ptcommon -> pitop.utils
  * pitop.core -> pitop.utils
  * Fix relative imports

  [ Mike Roberts ]
  * Update triggers
  * pitop.utils -> pitopcommon
  * Bash strict mode
  * Move sys_config from common library
  * Add pt-i2s
  * Add Lintian override
  * Move sys_config file
  * Remove unused file
  * Move files
  * Remove unused Lintian override
  * Fix import
  * Fix flake8 errors
  * Fix things
  * Don't log directly to journal
  * Update shutdown and reboot services to use latest common lib
  * Fix
  * Add SDK dpkg trigger
  * Add PulseAudio support
  * Add PulseAudio support (#91)
  * Bump changelog
  * Make all systemd services unbuffered
  * Provide packages we want to remove
  * Update dependencies
  * Add 'request-restart-pt-device-manager' dpkg trigger for pt-os-mods
  * Revert "Add 'request-restart-pt-device-manager' dpkg trigger for pt-os-mods"
  * Add lid open request message (#92)
  * Bump changelog
  * 15s timeout for poweroff-legacy

  [ Jorge Capona ]
  * Add OLED SPI port to PTDM messages (#93)

  [ Mike Roberts ]
  * Improve request server logging
  * Workaround fix for OLED SPI bus setting by moving commands to background (#94)
  * Bump changelog
  * Handle SPI bus change in thread wrapper
  * Fix private scope in notification manager
  * Handle OLED SPI bus notification in thread (#95)
  * Fix SPI bus management (#96)
  * Move pt-bt-kb stuff to sys-oled
  * Handle I2C reserved addresses (UU)

  [ Jorge Capona ]
  * Fix boot animation for non pi-topOS systems (#99)

  [ Mike Roberts ]
  * Add GitHub workflow files from SDK
  * build-debian-packages doesn't depend on tests
  * oops..
  * Architecture: any --> all
  * Fix Lintian warnings
  * Allow external sources when testing shell scripts

  [ Jorge Capona ]
  * Fix peripheral auto initialisation (#102)
  * Cast address to integer to determine if valid (#103)

  [ Mike Roberts ]
  * Update changelog bump CI script

  [ github-actions[bot] ]
  * [CI] Update debian/changelog for next release (#100)
  * Update 'draft release' CI workflow

  [ github-actions[bot] ]
  * [CI] Update debian/changelog for next release (#104)
  * Drop dependency on undefined build-python

  [ github-actions[bot] ]
  * [CI] Update debian/changelog for next release (#105)
  * Drop unused 'cd'

  [ m-roberts ]
  * Bump debian/changelog with proposed change for next release

  [ Mike Roberts ]
  * Update changelog
  * Ignore non-existent Python artifacts

  [ github-actions[bot] ]
  * [CI] Update debian/changelog for next release (#107)
  * CI: Comment out Python deploy steps
  * Standards-Version: 4.5.1

  [ Jorge Capona ]
  * Enable pi-top [4] UART when pi-topPULSE is connected (#109)

  [ github-actions[bot] ]
  * [CI] Update debian/changelog for next release (#108)

  [ Mike Roberts ]
  * Use 100% battery capacity if high enough (#111)
  * Update CI workflow files from sys-oled
  * Add alsa-utils dependency
  * Add raspi-config dependency

  [ github-actions[bot] ]
  * [CI] Update debian/changelog for next release (#110)
  * Use latest CI workflows
  * Hub manager uses callback directly (#113)
  * Look for setup.py in workspace

  [ Jorge Capona ]
  * Use env var to determine if battery messages are logged (#114)

  [ github-actions[bot] ]
  * [CI] Update debian/changelog for next release (#112)

  [ Mike Roberts ]
  * Remove Jenkinsfile
  * Revert "Remove Jenkinsfile"
  * Workflow: create draft release manually
  * Update workflow files
  * Update workflow files

 -- pi-top <deb-maintainers@pi-top.com>  Mon, 05 Jul 2021 10:26:39 +0000

pt-device-manager (4.1.4) buster; urgency=medium

  * Hub manager uses callback directly
  * Use environment variable to determine if battery messages are logged

 -- pi-top <deb-maintainers@pi-top.com>  Wed, 14 Apr 2021 16:54:16 +0000

pt-device-manager (4.1.3) buster; urgency=medium

  * Use 100% battery capacity if high enough (#111)
  * Add alsa-utils dependency
  * Add raspi-config dependency

 -- pi-top <deb-maintainers@pi-top.com>  Mon, 12 Apr 2021 13:21:18 +0000

pt-device-manager (4.1.2) buster; urgency=medium

  * Enable pi-top [4] UART when pi-topPULSE is connected

 -- pi-top <deb-maintainers@pi-top.com>  Wed, 17 Mar 2021 15:25:51 +0000

pt-device-manager (4.1.1) buster; urgency=medium

  * Fix peripheral auto initialisation (#102)
  * Cast address to integer to determine if valid (#103)

 -- pi-top <deb-maintainers@pi-top.com>  Tue, 16 Mar 2021 13:20:36 +0000

pt-device-manager (4.1.0) buster; urgency=medium

  * Fix boot animation for non pi-topOS systems

 -- Jorge Capona <jorge@pi-top.com>  Thu, 04 Feb 2021 11:11:10 -0300

pt-device-manager (4.0.7) buster; urgency=medium

  * Handle OLED SPI bus notification in thread
  * Move all GPIO interface operations to InterfaceManager
  * Initialize internal state before polling hub

 -- Jorge Capona <jorge@pi-top.com>  Mon, 11 Jan 2021 13:10:09 -0300

pt-device-manager (4.0.6) buster; urgency=medium

  * Perform SPI bus change in background

 -- Mike Roberts <mike@pi-top.com>  Mon, 11 Jan 2021 12:49:17 +0000

pt-device-manager (4.0.5) buster; urgency=medium

  * Increase legacy poweroff timeout to 15s
  * Add OLED SPI port to PTDM messages

 -- Jorge Capona <jorge@pi-top.com>  Thu, 07 Jan 2021 16:09:54 -0300

pt-device-manager (4.0.4) buster; urgency=medium

  * Add missing route for requesting lid open status

 -- Mike Roberts <mike@pi-top.com>  Wed, 16 Dec 2020 13:54:53 +0000

pt-device-manager (4.0.3) buster; urgency=medium

  * Breaks and Replaces pt-os-mods (<< 8) (for taking ownership of files)
  * Remove version restriction for packages to remove

 -- Mike Roberts <mike@pi-top.com>  Tue, 15 Dec 2020 01:08:22 +0000

pt-device-manager (4.0.2) buster; urgency=medium

  * Make package provide packages that are no longer desired on the system

 -- Mike Roberts <mike@pi-top.com>  Tue, 15 Dec 2020 00:34:15 +0000

pt-device-manager (4.0.1) buster; urgency=medium

  * Make all systemd services unbuffered

 -- Mike Roberts <mike@pi-top.com>  Mon, 14 Dec 2020 17:29:59 +0000

pt-device-manager (4.0.0) buster; urgency=medium

  * Apply Flake8 linting
  * Move hardware interaction library dependencies into package
  * Add bash strict mode to maintainer scripts
  * Update dpkg triggers for Python SDK

 -- Mike Roberts <mike@pi-top.com>  Fri, 11 Dec 2020 13:55:33 +0000

pt-device-manager (3.1.0) buster; urgency=medium

  * Fix poweroff on pi-topCEED

 -- Jorge Capona <jorge@pi-top.com>  Mon, 26 Oct 2020 11:53:04 -0300

pt-device-manager (3.0.0) buster; urgency=medium

  * Use compat level 12
  * Add dh-sequence-python3 build dependency
  * Standards-Version: 4.5.0
  * Migrate to native package format
  * Use multi-user.target to start services
  * Remove config.txt editing functionality, in favour of dtoverlay
  and dtparam
  * postinst: remove dtoverlay and dtparam fields from config.txt that were
  most likely being managed by pt-device-manager on pi-topOS when upgrading
  from pre-3.0.0

 -- Mike Roberts <mike@pi-top.com>  Thu, 15 Oct 2020 20:33:50 +0100

pt-device-manager (2.16.0-1) buster; urgency=medium

  * Replace poweroff-legacy with Python implementation
  * Remove wiringpi dependency
  * Clean up rules file

 -- Mike Roberts <mike@pi-top.com>  Tue, 13 Oct 2020 13:45:27 +0100

pt-device-manager (2.15.0-1) buster; urgency=medium

  * Extend pt-devices to support new connected pi-top devices
  * Move 'expanded FS' breadcrumb handling to preinst

 -- Mike Roberts <mike@pi-top.com>  Tue, 13 Oct 2020 13:32:36 +0100

pt-device-manager (2.14.3-1) buster; urgency=medium

  * Don't create 'expanded FS' breadcrumb if on chroot environment

 -- Jorge Capona <jorge@pi-top.com>  Wed, 07 Oct 2020 18:08:53 -0300

pt-device-manager (2.14.2-1) buster; urgency=medium

  * Add 'expanded FS' breadcrumb to handle upgrade situation
  where the onboarding did not create this itself

 -- Mike Roberts <mike@pi-top.com>  Fri, 02 Oct 2020 09:06:58 +0100

pt-device-manager (2.14.1-1) buster; urgency=medium

  * Handle non pi-topOS situation for startup animation

 -- Jorge Capona <jorge@pi-top.com>  Thu, 01 Oct 2020 12:13:57 -0300

pt-device-manager (2.14.0-1) buster; urgency=medium

  * Handle SPI via raspi-config
  * Send STOPPING signal to systemd before cleaning up
  * Shorten wait time for device ID to 5s (from 15s)
  * Non-zero exit code when an internal service fails
  * Zero exit code when a device ID could not be found

 -- Mike Roberts <mike@pi-top.com>  Mon, 14 Sep 2020 15:05:25 +0100

pt-device-manager (2.13.0-1) buster; urgency=medium

  * Remove apparently unnecessary baudrate reduction for pi-top 1

 -- Mike Roberts <mike@pi-top.com>  Mon, 14 Sep 2020 09:46:00 +0100

pt-device-manager (2.12.2-1) buster; urgency=medium

  * Remove extra character from startup animation script

 -- Jorge Capona <jorge@pi-top.com>  Thu, 10 Sep 2020 17:10:39 -0300

pt-device-manager (2.12.1-1) buster; urgency=medium

  * Use command runner to call pt-host

 -- Mike Roberts <mike@pi-top.com>  Thu, 10 Sep 2020 15:29:33 +0100

pt-device-manager (2.12.0-1) buster; urgency=medium

  * Improve initial logging flow
  * Improve `pt-host` robustness; use stderr for error printing

 -- Mike Roberts <mike@pi-top.com>  Thu, 10 Sep 2020 14:13:45 +0100

pt-device-manager (2.11.0-1) buster; urgency=medium

  * Loop startup animation when expanding filesystem
  * Fix OLED animation startup systemd dependency

 -- Mike Roberts <mike@pi-top.com>  Wed, 09 Sep 2020 10:18:28 +0100

pt-device-manager (2.10.0-1) buster; urgency=medium

  * Set Hifiberry explicitly in ALSA

 -- Mike Roberts <mike@pi-top.com>  Wed, 05 Aug 2020 17:15:02 +0100

pt-device-manager (2.9.0-1) buster; urgency=medium

  * Remove headphones audio configuration change on start

 -- Jorge Capona <jorge@pi-top.com>  Mon, 03 Aug 2020 19:43:31 -0400

pt-device-manager (2.8.1-1) buster; urgency=medium

  * Add dpkg triggers

 -- Jorge Capona <jorge@pi-top.com>  Thu, 16 Jul 2020 10:57:42 -0400

pt-device-manager (2.8.0-1) buster; urgency=medium

  * Add 'hard reboot' support (full power cycle)

 -- Mike Roberts <mike@pi-top.com>  Thu, 02 Jul 2020 11:18:22 +0100

pt-device-manager (2.7.1-1) buster; urgency=medium

  * Remove unused Bluetooth keyboard functions

 -- Mike Roberts <mike@pi-top.com>  Tue, 30 Jun 2020 17:33:08 +0100

pt-device-manager (2.7.0-1) buster; urgency=medium

  * Only modify /boot/config.txt if the host hardware has changed, otherwise
    preserve the user's changes.

 -- Ben Pring <ben@pi-top.com>  Tue, 21 Jan 2020 14:10:28 +0000

pt-device-manager (2.6.2-1) buster; urgency=medium

  * Set default screen blanking timeout to 5 mins

 -- Choudhry Amjad <choudhry@pi-top.com>  Mon, 14 Oct 2019 16:54:19 +0100

pt-device-manager (2.6.1-1) buster; urgency=medium

  * Reduce output noise from polling lxpanel plugin and battery warning message

 -- Choudhry Amjad <choudhry@pi-top.com>  Thu, 10 Oct 2019 11:56:52 +0100

pt-device-manager (2.6.0-4) buster; urgency=medium

  * Move to Buster (again)
  * Fix changelog formatting

 -- Mike Roberts <mike@pi-top.com>  Tue, 08 Oct 2019 16:57:02 +0800

pt-device-manager (2.6.0-3) stretch; urgency=medium

  * Enable reboot service

 -- Mike Roberts <mike@pi-top.com>  Tue, 08 Oct 2019 16:51:01 +0800

pt-device-manager (2.6.0-2) stretch; urgency=medium

  * Add reboot service

 -- Choudhry Amjad <choudhry@pi-top.com>  Fri, 04 Oct 2019 13:19:39 +0100

pt-device-manager (2.5.3-2) stretch; urgency=medium

  * Fix setting /boot/config.txt settings for dtoverlays

 -- Ben Pring <ben@pi-top.com>  Tue, 27 Aug 2019 12:39:21 +0100

pt-device-manager (2.5.2-2) stretch; urgency=medium

  * Update dependencies: pt-display is deprecated, add pt-os-mods

 -- Ben Pring <ben@pi-top.com>  Wed, 21 Aug 2019 10:47:01 +0100

pt-device-manager (2.5.1-1) stretch; urgency=medium

  * Bugfix: notification system

 -- Mike Roberts <mike@pi-top.com>  Tue, 13 Aug 2019 17:01:11 +0100

pt-device-manager (2.5.0-1) stretch; urgency=medium

  * Add ability to cancel battery warning notifications
  * Support pulse with and without pi-top hardware

 -- Mike Roberts <mike@pi-top.com>  Mon, 12 Aug 2019 16:14:36 +0100

pt-device-manager (2.4.4-1) stretch; urgency=medium

  * pt-poweroff: strip device host ID string

 -- Mike Roberts <mike@pi-top.com>  Sun, 11 Aug 2019 18:40:39 +0100

pt-device-manager (2.4.3-1) stretch; urgency=medium

  * Apply linting
  * Update device ID names to match branding
  * Simplify function to write device ID to file

 -- Mike Roberts <mike@pi-top.com>  Sun, 11 Aug 2019 12:14:55 +0100

pt-device-manager (2.4.2-1) stretch; urgency=medium

  * Remove retired pt-notifications-service dependency from systemd service
  * Remove unnecessary DISPLAY environment variable from systemd service

 -- Mike Roberts <mike@pi-top.com>  Tue, 25 Jun 2019 15:10:39 +0100

pt-device-manager (2.4.1-1) stretch; urgency=medium

  * Refactor shutdown service to handle different host devices better

 -- Choudhry Amjad <Choudhry@pi-top.com>  Tue, 30 Jul 2019 16:20:05 +0100

pt-device-manager (2.4.0-1) stretch; urgency=medium

  * Migrate notification manager from pt-notifications
  * Refactor shutdown service to better handle different host devices
  * Release systemd service earlier

 -- Mike Roberts <mike@pi-top.com>  Tue, 25 Jun 2019 15:10:39 +0100

pt-device-manager (2.3.0-1) stretch; urgency=medium

  * Allow device manager to exit cleanly on non-pi-top hardware.
  * Fix I2S audio switching

 -- Ben Pring <ben@pi-top.com>  Fri, 12 Jul 2019 09:42:52 +0100

pt-device-manager (2.2.3-1) stretch; urgency=medium

  * Add pt-host to provide an easy way to discover the host device
  * Improve error handling around the oled start-up animation

 -- Choudhry Amjad <choudhry@pi-top.com>  Fri, 07 Jun 2019 11:59:36 +0100

pt-device-manager (2.2.2-2) buster; urgency=medium

  * Move to Buster

 -- Mike Roberts <mike@pi-top.com>  Tue, 25 Jun 2019 15:10:39 +0100

pt-device-manager (2.2.2-1) stretch; urgency=low

  * Fix bug pairing bluetooth keyboards

 -- Ben Pring <ben@pi-top.com>  Mon, 13 May 2019 13:57:11 +0100

pt-device-manager (2.2.1-1) stretch; urgency=low

  * Move the keyboard autoconnect logic into the BTKBManager class, and into its own thread which can be signalled when necessary

 -- Ben Pring <ben@pi-top.com>  Mon, 29 Apr 2019 15:48:31 +0100

pt-device-manager (2.2.0-1) stretch; urgency=low

  * Only use Bluetooth discovery when needed for auto-connecting, to avoid heavy Bluetooth traffic which slows down lxpanel
  * Restart Bluetooth manager loop if an exception is caught
  * Improve handling and print-out of all DBus errors
  * Increase max number of attempts to get current keyboard mac address from 10 to 20
  * When forgetting previous keyboards, check if need to disconnect before removing
  * Check that keyboard last master mac address if valid before parsing when checking if keyboard master matches current device
  * Separate out cleanup from auto-connecting bt keyboard into separate function to always stop Bluetooth discovery
  * Fix "get_keyboard_docked()" function in hub manager
  * Add debug print-out to show when main idletime check thread has started

 -- Mike Roberts <mike@pi-top.com>  Fri, 26 Apr 2019 13:54:50 +0800

pt-device-manager (2.1.0-1) stretch; urgency=low

  * Add support for publishing display state changes

 -- Mike Roberts <mike@pi-top.com>  Wed, 24 Apr 2019 20:03:45 +0800

pt-device-manager (2.0.0-1) stretch; urgency=low

  * Added pi-top [4] support, including Bluetooth keyboard handling
  * xhost configuration moved from maintainer script to pt-display dependency

 -- Mike Roberts <mike@pi-top.com>  Fri, 24 Aug 2018 17:15:59 +0100

pt-device-manager (1.0.7-2) stretch; urgency=low

  * Correctly handle data type in get_debian_version
  * Handle all responses from attempts to read from hub
  * Prevent repeat instantiation of devices

 -- Mike Roberts <mike@pi-top.com>  Fri, 24 Aug 2018 17:15:59 +0100

pt-device-manager (1.0.7-1) stretch; urgency=low

  * Additional logging around soft shutdown on low battery

 -- Mike Roberts <mike@pi-top.com>  Mon, 09 Jul 2018 13:59:57 +0100

pt-device-manager (1.0.6-2) stretch; urgency=low

  * Manual systemd management in maintainer scripts

 -- Mike Roberts <mike@pi-top.com>  Mon, 21 May 2018 18:24:08 +0100

pt-device-manager (1.0.6-1) stretch; urgency=low

  * Retired usage of python3-pt-idletime, in favour of xprintidle
  * Local connections to X server enabled by setting display-setup-script in lightdm configuration instead of pt-xhost-fix systemd service

 -- Mike Roberts <mike@pi-top.com>  Mon, 21 May 2018 18:24:08 +0100

pt-device-manager (1.0.5-1) stretch; urgency=low

  * Updated package for Stretch
  * Recommends pt-input
  * Added pt-devices
  * Increased default screen timeout
  * Fixed 'empty timeout file' bug
  * Add initial code for pi-topPROTO+ support
  * Use python3-pt-common for device classes
  * Fix pi-topCEED shutdown
  * WantedBy=local-fs.target
  * I2C is now enabled on initialisation if it is not already enabled
  * Improved handling of undetected hardware, particularly around shutdown
  * Improved pt-battery output

 -- Mike Roberts <mike@pi-top.com>  Fri, 09 Mar 2018 16:19:05 +0000

pt-device-manager (1.0.4-1) jessie; urgency=low

  * Fixed bad ptdm_message call in pt-brightness

 -- Mike Roberts <mike@pi-top.com>  Fri, 03 Nov 2017 14:24:52 +0000

pt-device-manager (1.0.3-1) jessie; urgency=low

  * Allow device manager to run on non-pi-top hardware
  * Add some documentation

 -- Ben Pring <ben@pi-top.com>  Thu, 26 Oct 2017 11:07:31 +0100

pt-device-manager (1.0.2-1) jessie; urgency=low

  * Add support for unsupported hardware message

 -- Ben Pring <ben@pi-top.com>  Tue, 10 Oct 2017 15:02:14 +0100

pt-device-manager (1.0.1-1) jessie; urgency=low

  * Fixes around device identification, low-battery handling logic, brightness

 -- Ben Pring <ben@pi-top.com>  Thu, 05 Oct 2017 14:21:42 +0100

pt-device-manager (1.0.0-1) jessie; urgency=low

  * Initial release.

 -- Ben Pring <ben@pi-top.com>  Wed, 02 Aug 2017 12:04:36 +0100
