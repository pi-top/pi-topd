#!/usr/bin/python3

# The entry point for the application. Creates the controller and handles 
# high-level config e.g. debug level etc.

import signal
from ptdm_controller import Controller
import logging
import sys

controller = Controller()

def signal_handler(signal, frame):

	controller.stop()


# Capture and handle interrupts

signal.signal(signal.SIGINT, signal_handler)
signal.signal(signal.SIGTERM, signal_handler)


# Get any custom log level

log_level = logging.INFO

if (len(sys.argv) > 1):
	log_level = int(sys.argv[1])


# Start the controller

controller.initialise(log_level)
controller.run()
